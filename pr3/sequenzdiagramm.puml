@startuml
title Registrierung und Nutzung eines Roboters (inkl. Token-Ring)

participant "Robot-Node" as Robot
participant "Terminal-Client A" as ClientA
participant "Terminal-Client B" as ClientB
participant "Registry-Server" as Registry

== Registrierung ==
Robot -> Registry : register(name, ip, port, ROBOT)
Registry -> Registry : prüfe Name
Registry -> Registry : ID vergeben\nEintrag speichern
Registry --> Robot : ok, id

ClientA -> Registry : register(name, ip, port, CLIENT)
Registry -> Registry : prüfe Name
Registry -> Registry : ID vergeben\nEintrag speichern
Registry --> ClientA : ok, id

ClientB -> Registry : register(name, ip, port, CLIENT)
Registry -> Registry : prüfe Name
Registry -> Registry : ID vergeben\nEintrag speichern
Registry --> ClientB : ok, id

== Ring-Initialisierung ==
ClientA -> Registry : list(CLIENT)
ClientA -> ClientA : kleinste ID?\n→ Token erzeugen

== Topologie-Aktualisierung ==
ClientA -> Registry : ring_info(clientId)
Registry --> ClientA : prev, next

== Token-Übergabe ==
ClientA -> ClientB : token

== Abfrage verfügbarer Roboter ==
ClientB -> Registry : list(type="robot")
Registry --> ClientB : Liste aller Roboter\n(id, name, ip, port)


== Robotersteuerung ==
ClientB -> Robot : MOVE / SHUTDOWN
Robot --> ClientB : ok

ClientB -> ClientA : token

@enduml

